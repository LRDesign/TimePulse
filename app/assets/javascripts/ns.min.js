/*
 * NinjaScript - 0.9
 * written by and copyright 2010-2011 Judson Lester and Logical Reality Design
 * Licensed under the MIT license
 *
 * 06-29-2011
 */
/*
 RequireJS 0.24.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
var require,define;
(function(){function f(b){return q.call(b)==="[object Function]"}function j(b){return q.call(b)==="[object Array]"}function d(b,a,e){for(var i in a)if(!(i in g)&&(!(i in b)||e))b[i]=a[i];return l}function a(b,g,a){var i,c,m;for(i=0;m=g[i];i++){m=typeof m==="string"?{name:m}:m;c=m.location;if(a&&(!c||c.indexOf("/")!==0&&c.indexOf(":")===-1))c=a+"/"+(c||m.name);b[m.name]={name:m.name,location:c||m.name,lib:m.lib||"lib",main:(m.main||"lib/main").replace(o,"").replace(e,"")}}}function c(i){function e(b){var g,a;
for(g=0;a=b[g];g++)if(a===".")b.splice(g,1),g-=1;else if(a==="..")if(g===1&&(b[2]===".."||b[0]===".."))break;else g>0&&(b.splice(g-1,2),g-=2)}function c(b,g){var a,i;b.charAt(0)==="."&&g&&(w.pkgs[g]?g=[g]:(g=g.split("/"),g=g.slice(0,g.length-1)),b=g.concat(b.split("/")),e(b),i=w.pkgs[a=b[0]],b=b.join("/"),i&&b===a+"/"+i.main&&(b=a));return b}function x(b,g){var a=b?b.indexOf("!"):-1,i=null,e=g?g.name:null,m=b,d,k;a!==-1&&(i=b.substring(0,a),b=b.substring(a+1,b.length));i&&(i=c(i,e));b&&(d=i?(a=u[i])?
a.normalize?a.normalize(b,function(b){return c(b,e)}):c(b,e):"__$p"+e+"@"+b:c(b,e),k=F[d],k||(k=l.toModuleUrl?l.toModuleUrl(n,b,g):n.nameToUrl(b,null,g),F[d]=k));return{prefix:i,name:d,parentMap:g,url:k,originalName:m,fullName:i?i+"!"+d:d}}function h(){var b=!0,g=w.priorityWait,a,i;if(g){for(i=0;a=g[i];i++)if(!A[a]){b=!1;break}b&&delete w.priorityWait}return b}function q(b){return function(g){b.exports=g}}function p(b,g,a){return function(){var i=[].concat(B.call(arguments,0)),e;if(a&&f(e=i[i.length-
1]))e.__requireJsBuild=!0;i.push(g);return b.apply(null,i)}}function o(b,g){var a=p(n.require,b,g);d(a,{nameToUrl:p(n.nameToUrl,b),toUrl:p(n.toUrl,b),isDefined:p(n.isDefined,b),ready:l.ready,isBrowser:l.isBrowser});if(l.paths)a.paths=l.paths;return a}function s(b){var g=b.prefix,a=b.fullName;J[a]||a in u||(g&&!Q[g]&&(Q[g]=void 0,(S[g]||(S[g]=[])).push(b),(C[g]||(C[g]=[])).push({onDep:function(b){if(b===g){var a,i,e,c,m,d,V=S[g];if(V)for(e=0;a=V[e];e++)if(b=a.fullName,a=x(a.originalName,a.parentMap),
a=a.fullName,i=C[b]||[],c=C[a],a!==b){b in J&&(delete J[b],J[a]=!0);C[a]=c?c.concat(i):i;delete C[b];for(c=0;c<i.length;c++){d=i[c].depArray;for(m=0;m<d.length;m++)d[m]===b&&(d[m]=a)}}delete S[g]}}}),s(x(g))),n.paused.push(b))}function r(b){var g,a,i;g=b.callback;var e=b.fullName;i=[];var c=b.depArray;if(g&&f(g)){if(c)for(g=0;g<c.length;g++)i.push(b.deps[c[g]]);a=l.execCb(e,b.callback,i);if(e)if(b.usingExports&&a===void 0&&(!b.cjsModule||!("exports"in b.cjsModule)))a=u[e];else if(b.cjsModule&&"exports"in
b.cjsModule)a=u[e]=b.cjsModule.exports;else{if(e in u&&!b.usingExports)return l.onError(Error(e+" has already been defined"));u[e]=a}}else e&&(a=u[e]=g);if(e&&(i=C[e])){for(g=0;g<i.length;g++)i[g].onDep(e,a);delete C[e]}if(L[b.waitId])delete L[b.waitId],b.isDone=!0,n.waitCount-=1,n.waitCount===0&&(G=[])}function j(g,a,i,e){var g=x(g,e),c=g.name,m=g.fullName,d={},k={waitId:c||b+T++,depCount:0,depMax:0,prefix:g.prefix,name:c,fullName:m,deps:{},depArray:a,callback:i,onDep:function(b,g){b in k.deps||
(k.deps[b]=g,k.depCount+=1,k.depCount===k.depMax&&r(k))}},l,h;if(m){if(m in u||A[m]===!0)return;J[m]=!0;A[m]=!0;n.jQueryDef=m==="jquery"}for(i=0;i<a.length;i++)if(l=a[i])l=x(l,c?g:e),h=l.fullName,a[i]=h,h==="require"?k.deps[h]=o(g):h==="exports"?(k.deps[h]=u[m]={},k.usingExports=!0):h==="module"?(k.cjsModule=l=k.deps[h]={id:c,uri:c?n.nameToUrl(c,null,e):void 0},l.setExports=q(l)):h in u&&!(h in L)?k.deps[h]=u[h]:d[h]||(k.depMax+=1,s(l),(C[h]||(C[h]=[])).push(k),d[h]=!0);k.depCount===k.depMax?r(k):
(L[k.waitId]=k,G.push(k),n.waitCount+=1)}function H(b){j.apply(null,b);A[b[0]]=!0}function z(b){if(!n.jQuery&&(b=b||(typeof jQuery!=="undefined"?jQuery:null))&&"readyWait"in b)if(n.jQuery=b,H(["jquery",[],function(){return jQuery}]),n.scriptCount)b.readyWait+=1,n.jQueryIncremented=!0}function D(b,g){if(!b.isDone){var a=b.fullName,i=b.depArray,e,c;if(a){if(g[a])return u[a];g[a]=!0}for(c=0;c<i.length;c++)if((e=i[c])&&!b.deps[e]&&L[e])b.onDep(e,D(L[e],g));return a?u[a]:void 0}}function E(){var b=w.waitSeconds*
1E3,a=b&&n.startTime+b<(new Date).getTime(),b="",i=!1,e=!1,c;if(!(n.pausedCount>0)){if(w.priorityWait)if(h())y();else return;for(c in A)if(!(c in g)&&(i=!0,!A[c]))if(a)b+=c+" ";else{e=!0;break}if(i||n.waitCount){if(a&&b)return c=Error("require.js load timeout for modules: "+b),c.requireType="timeout",c.requireModules=b,l.onError(c);if(e||n.scriptCount)(t||M)&&setTimeout(E,50);else if(n.waitCount){for(N=0;b=G[N];N++)D(b,{});E()}else l.checkReadyState()}}}function P(b,g){var a=g.name,i=g.fullName,e;
if(!(i in u||i in A))Q[b]||(Q[b]=u[b]),A[i]||(A[i]=!1),e=function(e){if(require.onPluginLoad)require.onPluginLoad(n,b,a,e);r({prefix:g.prefix,name:g.name,fullName:g.fullName,callback:function(){return e}});A[i]=!0},e.fromText=function(b,g){var a=k;n.loaded[b]=!1;n.scriptCount+=1;a&&(k=!1);eval(g);a&&(k=!0);n.completeLoad(b)},Q[b].load(a,o(g.parentMap,!0),e,w)}function K(b){b.prefix&&b.name.indexOf("__$p")===0&&u[b.prefix]&&(b=x(b.originalName,b.parentMap));var g=b.prefix,a=b.fullName;!J[a]&&!A[a]&&
(J[a]=!0,g?u[g]?P(g,b):(R[g]||(R[g]=[],(C[g]||(C[g]=[])).push({onDep:function(b){if(b===g){for(var a,i=R[g],b=0;b<i.length;b++)a=i[b],P(g,x(a.originalName,a.parentMap));delete R[g]}}})),R[g].push(b)):l.load(n,a,b.url))}var n,y,w={waitSeconds:7,baseUrl:v.baseUrl||"./",paths:{},pkgs:{}},I=[],J={require:!0,exports:!0,module:!0},F={},u={},A={},L={},G=[],T=0,C={},Q={},R={},U=0,S={};y=function(){var b,g,a;U+=1;if(n.scriptCount<=0)n.scriptCount=0;for(;I.length;)if(b=I.shift(),b[0]===null)return l.onError(Error("Mismatched anonymous require.def modules"));
else H(b);if(!w.priorityWait||h())for(;n.paused.length;){a=n.paused;n.pausedCount+=a.length;n.paused=[];for(g=0;b=a[g];g++)K(b);n.startTime=(new Date).getTime();n.pausedCount-=a.length}U===1&&E();U-=1};n={contextName:i,config:w,defQueue:I,waiting:L,waitCount:0,specified:J,loaded:A,urlMap:F,scriptCount:0,urlFetched:{},defined:u,paused:[],pausedCount:0,plugins:Q,managerCallbacks:C,makeModuleMap:x,normalize:c,configure:function(b){var i,e,c;b.baseUrl&&b.baseUrl.charAt(b.baseUrl.length-1)!=="/"&&(b.baseUrl+=
"/");i=w.paths;c=w.pkgs;d(w,b,!0);if(b.paths){for(e in b.paths)e in g||(i[e]=b.paths[e]);w.paths=i}if((i=b.packagePaths)||b.packages){if(i)for(e in i)e in g||a(c,i[e],e);b.packages&&a(c,b.packages);w.pkgs=c}if(b.priority)e=n.requireWait,n.requireWait=!1,n.takeGlobalQueue(),y(),n.require(b.priority),y(),n.requireWait=e,w.priorityWait=b.priority;if(b.deps||b.callback)n.require(b.deps||[],b.callback);b.ready&&l.ready(b.ready)},isDefined:function(b,g){return x(b,g).fullName in u},require:function(b,g,
a){if(typeof b==="string"){if(l.get)return l.get(n,b,g);g=x(b,g);b=u[g.fullName];return b===void 0?l.onError(Error("require: module name '"+g.fullName+"' has not been loaded yet for context: "+i)):b}j(null,b,g,a);if(!n.requireWait)for(;!n.scriptCount&&n.paused.length;)y()},takeGlobalQueue:function(){m.length&&(O.apply(n.defQueue,[n.defQueue.length-1,0].concat(m)),m=[])},completeLoad:function(b){var g;for(n.takeGlobalQueue();I.length;)if(g=I.shift(),g[0]===null){g[0]=b;break}else if(g[0]===b)break;
else H(g),g=null;g?H(g):H([b,[],b==="jquery"&&typeof jQuery!=="undefined"?function(){return jQuery}:null]);A[b]=!0;z();l.isAsync&&(n.scriptCount-=1);y();l.isAsync||(n.scriptCount-=1)},toUrl:function(b,g){var a=b.lastIndexOf("."),i=null;a!==-1&&(i=b.substring(a,b.length),b=b.substring(0,a));return n.nameToUrl(b,i,g)},nameToUrl:function(b,g,a){var i,m,d,k,h=n.config;if(b.indexOf("./")===0||b.indexOf("../")===0)a=a&&a.url?a.url.split("/"):[],a.length&&a.pop(),a=a.concat(b.split("/")),e(a),g=a.join("/")+
(g?g:l.jsExtRegExp.test(b)?"":".js");else if(b=c(b,a),l.jsExtRegExp.test(b))g=b+(g?g:"");else{i=h.paths;m=h.pkgs;a=b.split("/");for(k=a.length;k>0;k--)if(d=a.slice(0,k).join("/"),i[d]){a.splice(0,k,i[d]);break}else if(d=m[d]){b=b===d.name?d.location+"/"+d.main:d.location+"/"+d.lib;a.splice(0,k,b);break}g=a.join("/")+(g||".js");g=(g.charAt(0)==="/"||g.match(/^\w+:/)?"":h.baseUrl)+g}return h.urlArgs?g+((g.indexOf("?")===-1?"?":"&")+h.urlArgs):g}};n.jQueryCheck=z;n.resume=y;return n}function h(){var b,
g,a;if(x&&x.readyState==="interactive")return x;b=document.getElementsByTagName("script");for(g=b.length-1;g>-1&&(a=b[g]);g--)if(a.readyState==="interactive")return x=a;return null}var s=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,r=/require\(["']([^'"\s]+)["']\)/g,o=/^\.\//,e=/\.js$/,q=Object.prototype.toString,p=Array.prototype,B=p.slice,O=p.splice,t=!!(typeof window!=="undefined"&&navigator&&document),M=!t&&typeof importScripts!=="undefined",F=t&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,
G=typeof opera!=="undefined"&&opera.toString()==="[object Opera]",b="_r@@",g={},i={},m=[],x=null,k=!1,l,p={},H,v,K,P,D,E,z,N,I,T,y;if(typeof require!=="undefined")if(f(require))return;else p=require;l=require=function(b,g,a){var e="_",m;!j(b)&&typeof b!=="string"&&(m=b,j(g)?(b=g,g=a):b=[]);if(m&&m.context)e=m.context;a=i[e]||(i[e]=c(e));m&&a.configure(m);return a.require(b,g)};l.version="0.24.0";l.isArray=j;l.isFunction=f;l.mixin=d;l.jsExtRegExp=/^\/|:|\?|\.js$/;v=l.s={contexts:i,skipAsync:{},isPageLoaded:!t,
readyCalls:[]};if(l.isAsync=l.isBrowser=t)if(K=v.head=document.getElementsByTagName("head")[0],P=document.getElementsByTagName("base")[0])K=v.head=P.parentNode;l.onError=function(b){throw b;};l.load=function(b,g,a){var i=b.contextName,e=b.urlFetched,c=b.loaded;c[g]||(c[g]=!1);if(!e[a]&&(b.scriptCount+=1,l.attach(a,i,g),e[a]=!0,b.jQuery&&!b.jQueryIncremented))b.jQuery.readyWait+=1,b.jQueryIncremented=!0};define=l.def=function(b,g,a){var e;typeof b!=="string"&&(a=g,g=b,b=null);l.isArray(g)||(a=g,g=
[]);!b&&!g.length&&l.isFunction(a)&&a.length&&(a.toString().replace(s,"").replace(r,function(b,a){g.push(a)}),g=["require","exports","module"].concat(g));if(k){e=H||h();if(!e)return l.onError(Error("ERROR: No matching script interactive for "+a));b||(b=e.getAttribute("data-requiremodule"));e=i[e.getAttribute("data-requirecontext")]}(e?e.defQueue:m).push([b,g,a])};define.amd={multiversion:!0,plugins:!0};l.execCb=function(b,g,a){return g.apply(null,a)};l.onScriptLoad=function(b){var g=b.currentTarget||
b.srcElement,a;if(b.type==="load"||F.test(g.readyState))x=null,b=g.getAttribute("data-requirecontext"),a=g.getAttribute("data-requiremodule"),i[b].completeLoad(a),g.detachEvent&&!G?g.detachEvent("onreadystatechange",l.onScriptLoad):g.removeEventListener("load",l.onScriptLoad,!1)};l.attach=function(b,g,a,e,c){var m;if(t)return e=e||l.onScriptLoad,m=document.createElement("script"),m.type=c||"text/javascript",m.charset="utf-8",m.async=!v.skipAsync[b],m.setAttribute("data-requirecontext",g),m.setAttribute("data-requiremodule",
a),m.attachEvent&&!G?(k=!0,m.attachEvent("onreadystatechange",e)):m.addEventListener("load",e,!1),m.src=b,H=m,P?K.insertBefore(m,P):K.appendChild(m),H=null,m;else if(M)e=i[g],g=e.loaded,g[a]=!1,importScripts(b),e.completeLoad(a);return null};if(t){D=document.getElementsByTagName("script");for(N=D.length-1;N>-1&&(E=D[N]);N--){if(!K)K=E.parentNode;if(z=E.getAttribute("data-main")){if(!p.baseUrl)D=z.split("/"),E=D.pop(),D=D.length?D.join("/")+"/":"./",p.baseUrl=D,z=E.replace(e,"");p.deps=p.deps?p.deps.concat(z):
[z];break}}}v.baseUrl=p.baseUrl;l.pageLoaded=function(){if(!v.isPageLoaded){v.isPageLoaded=!0;I&&clearInterval(I);if(T)document.readyState="complete";l.callReady()}};l.checkReadyState=function(){var b=v.contexts,a;for(a in b)if(!(a in g)&&b[a].waitCount)return;v.isDone=!0;l.callReady()};l.callReady=function(){var b=v.readyCalls,a,e,i;if(v.isPageLoaded&&v.isDone){if(b.length){v.readyCalls=[];for(a=0;e=b[a];a++)e()}b=v.contexts;for(i in b)if(!(i in g)&&(a=b[i],a.jQueryIncremented))a.jQuery.ready(!0),
a.jQueryIncremented=!1}};l.ready=function(b){v.isPageLoaded&&v.isDone?b():v.readyCalls.push(b);return l};if(t){if(document.addEventListener){if(document.addEventListener("DOMContentLoaded",l.pageLoaded,!1),window.addEventListener("load",l.pageLoaded,!1),!document.readyState)T=!0,document.readyState="loading"}else window.attachEvent&&(window.attachEvent("onload",l.pageLoaded),self===self.top&&(I=setInterval(function(){try{document.body&&(document.documentElement.doScroll("left"),l.pageLoaded())}catch(b){}},
30)));document.readyState==="complete"&&l.pageLoaded()}l(p);if(l.isAsync&&typeof setTimeout!=="undefined")y=v.contexts[p.context||"_"],y.requireWait=!0,setTimeout(function(){y.requireWait=!1;y.takeGlobalQueue();y.jQueryCheck();y.scriptCount||y.resume();l.checkReadyState()},0)})();
define("utils",["require","exports","module"],function(){function f(){this.log_function=null}f.prototype={log:function(d){this.log_function(d)},active_logging:function(d){try{console.log(d)}catch(a){}},inactive_logging:function(){},disactivate_logging:function(){this.log_function=this.inactive_logging},activate_logging:function(){this.log_function=this.active_logging},isArray:function(d){return d.constructor==Array},forEach:function(d,a,c){if(typeof d.forEach=="function")return d.forEach(a,c);else if(typeof Array.prototype.forEach==
"function")return Array.prototype.forEach.call(d,a,c);else for(var h=Number(d.length),f=0;f<h;f+=1)typeof d[f]!="undefined"&&a.call(c,d[f],f,d)}};var j=new f;typeof NINJASCRIPT_DEBUGGING=="undefined"?j.disactivate_logging():j.activate_logging();return j});
define("ninja/exceptions",["require","exports","module"],function(){function f(f){var d=function(a){Error.call(this,a);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.name=f;this.message=a};d.prototype=Error.prototype;return d}return{CouldntChoose:f("CouldntChoose"),TransformFailed:f("TransformFailed")}});
define("ninja/behaviors",["ninja/exceptions"],function(f){var j=f.CouldntChoose,f={meta:function(d,a){d(this);this.chooser=a}};f.meta.prototype={choose:function(d){var a=this.chooser(d);if(a!==void 0)return a.choose(d);else throw new j("Couldn't choose behavior for ".element.toString());}};f.select=function(d){this.menu=d};f.select.prototype={choose:function(d){for(var a in this.menu)if(jQuery(d).is(a))return this.menu[a].choose(d);return null}};f.base=function(d){this.helpers={};this.eventHandlers=
[];this.priority=this.lexicalOrder=0;if(typeof d.transform=="function")this.transform=d.transform,delete d.transform;if(typeof d.helpers!="undefined")this.helpers=d.helpers,delete d.helpers;if(typeof d.priority!="undefined")this.priority=d.priority;delete d.priority;this.eventHandlers=typeof d.events!="undefined"?d.events:d;return this};f.base.prototype={apply:function(d){var a=this.inContext({}),d=this.applyTransform(a,d);jQuery(d).data("ninja-visited",a);this.applyEventHandlers(a,d);return d},priority:function(d){this.priority=
d;return this},choose:function(){return this},inContext:function(d){function a(){}a.prototype=d;return Ninja.tools.enrich(new a,this.helpers)},applyTransform:function(d,a){var c=this.transform.call(d,a);return c===void 0?a:c},applyEventHandlers:function(d,a){for(var c in this.eventHandlers){var h=this.eventHandlers[c];jQuery(a).bind(c,this.makeHandler.call(d,h))}return a},recordEventHandlers:function(d,a){for(var c in this.eventHandlers)d.recordHandler(this,c,function(d){return this.makeHandler.call(a,
this.eventHandlers[c],d)})},buildHandler:function(d,a,c){var h,f=!0,r=!0,o=!0,e=!1,q=!1,a=this.eventHandlers[a];if(typeof a=="function")h=a;else{h=a[0];for(var a=a.slice(1,a.length),p=a.length,j=0;j<p;j++){if(a[j]=="dontContinue"||a[j]=="overridesOthers")f=!1;if(a[j]=="andDoDefault"||a[j]=="continues"||a[j]=="allowDefault")r=!1;if(a[j]=="allowPropagate"||a[j]=="dontStopPropagation")o=!1;a[j]=="andDoOthers"&&(e=!1);a[j]=="changesDOM"&&(q=!0)}}a=function(){var a=Array.prototype.shift.call(arguments);
Array.prototype.unshift.call(arguments,this);Array.prototype.unshift.call(arguments,a);h.apply(d,arguments);a.isFallthroughPrevented()||c.apply(d,arguments);return r?!1:!a.isDefaultPrevented()};f||(a=this.prependAction(a,function(a){a.preventFallthrough()}));r&&(a=this.prependAction(a,function(a){a.preventDefault()}));o&&(a=this.prependAction(a,function(a){a.stopPropagation()}));e&&(a=this.prependAction(a,function(a){a.stopImmediatePropagation()}));q&&(a=this.appendAction(a,function(){Ninja.tools.fireMutationEvent()}));
return a=this.prependAction(a,function(a){a.isFallthroughPrevented=function(){return!1};a.preventFallthrough=function(){a.isFallthroughPrevented=function(){return!0}}})},prependAction:function(d,a){return function(){a.apply(this,arguments);return d.apply(this,arguments)}},appendAction:function(d,a){return function(){var c=d.apply(this,arguments);a.apply(this,arguments);return c}},transform:function(d){return d}};return f});
define("sizzle-1.0",["require","exports","module"],function(){function f(b){for(var g="",a,e=0;b[e];e++)a=b[e],a.nodeType===3||a.nodeType===4?g+=a.nodeValue:a.nodeType!==8&&(g+=f(a.childNodes));return g}function j(b,g,a,e,c,d){for(var c=0,h=e.length;c<h;c++){var f=e[c];if(f){for(var f=f[b],q=!1;f;){if(f.sizcache===a){q=e[f.sizset];break}if(f.nodeType===1&&!d)f.sizcache=a,f.sizset=c;if(f.nodeName.toLowerCase()===g){q=f;break}f=f[b]}e[c]=q}}}function d(b,g,a,e,c,d){for(var c=0,h=e.length;c<h;c++){var f=
e[c];if(f){for(var f=f[b],q=!1;f;){if(f.sizcache===a){q=e[f.sizset];break}if(f.nodeType===1){if(!d)f.sizcache=a,f.sizset=c;if(typeof g!=="string"){if(f===g){q=!0;break}}else if(o.filter(g,[f]).length>0){q=f;break}}f=f[b]}e[c]=q}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,c=0,h=Object.prototype.toString,s=!1,r=!0;[0,0].sort(function(){r=!1;return 0});var o=function(b,g,i,c){var i=i||[],d=g=g||document;if(g.nodeType!==
1&&g.nodeType!==9)return[];if(!b||typeof b!=="string")return i;for(var k=[],f,p,j,r,s=!0,t=F(g),E=b;(a.exec(""),f=a.exec(E))!==null;)if(E=f[3],k.push(f[1]),f[2]){r=f[3];break}if(k.length>1&&q.exec(b))if(k.length===2&&e.relative[k[0]])p=G(k[0]+k[1],g);else for(p=e.relative[k[0]]?[g]:o(k.shift(),g);k.length;)b=k.shift(),e.relative[b]&&(b+=k.shift()),p=G(b,p);else if(!c&&k.length>1&&g.nodeType===9&&!t&&e.match.ID.test(k[0])&&!e.match.ID.test(k[k.length-1])&&(f=o.find(k.shift(),g,t),g=f.expr?o.filter(f.expr,
f.set)[0]:f.set[0]),g){f=c?{expr:k.pop(),set:B(c)}:o.find(k.pop(),k.length===1&&(k[0]==="~"||k[0]==="+")&&g.parentNode?g.parentNode:g,t);p=f.expr?o.filter(f.expr,f.set):f.set;for(k.length>0?j=B(p):s=!1;k.length;){var z=k.pop();f=z;e.relative[z]?f=k.pop():z="";f==null&&(f=g);e.relative[z](j,f,t)}}else j=[];j||(j=p);j||o.error(z||b);if(h.call(j)==="[object Array]")if(s)if(g&&g.nodeType===1)for(b=0;j[b]!=null;b++)j[b]&&(j[b]===!0||j[b].nodeType===1&&M(g,j[b]))&&i.push(p[b]);else for(b=0;j[b]!=null;b++)j[b]&&
j[b].nodeType===1&&i.push(p[b]);else i.push.apply(i,j);else B(j,i);r&&(o(r,d,i,c),o.uniqueSort(i));return i};o.uniqueSort=function(b){if(t&&(s=r,b.sort(t),s))for(var g=1;g<b.length;g++)b[g]===b[g-1]&&b.splice(g--,1);return b};o.matches=function(b,g){return o(b,null,null,g)};o.find=function(b,g,a){var c,d;if(!b)return[];for(var f=0,h=e.order.length;f<h;f++){var q=e.order[f];if(d=e.leftMatch[q].exec(b)){var p=d[1];d.splice(1,1);if(p.substr(p.length-1)!=="\\"&&(d[1]=(d[1]||"").replace(/\\/g,""),c=e.find[q](d,
g,a),c!=null)){b=b.replace(e.match[q],"");break}}}c||(c=g.getElementsByTagName("*"));return{set:c,expr:b}};o.filter=function(b,g,a,c){for(var d=b,f=[],h=g,q,p,j=g&&g[0]&&F(g[0]);b&&g.length;){for(var r in e.filter)if((q=e.leftMatch[r].exec(b))!=null&&q[2]){var s=e.filter[r],B,t;t=q[1];p=!1;q.splice(1,1);if(t.substr(t.length-1)!=="\\"){h===f&&(f=[]);if(e.preFilter[r])if(q=e.preFilter[r](q,h,a,f,c,j)){if(q===!0)continue}else p=B=!0;if(q)for(var O=0;(t=h[O])!=null;O++)if(t){B=s(t,q,O,h);var M=c^!!B;
a&&B!=null?M?p=!0:h[O]=!1:M&&(f.push(t),p=!0)}if(B!==void 0){a||(h=f);b=b.replace(e.match[r],"");if(!p)return[];break}}}if(b===d)if(p==null)o.error(b);else break;d=b}return h};o.error=function(b){throw"Syntax error, unrecognized expression: "+b;};var e=o.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,
TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(b){return b.getAttribute("href")}},relative:{"+":function(b,g){var a=typeof g==="string",e=a&&!/\W/.test(g),a=a&&!e;e&&(g=g.toLowerCase());for(var e=0,c=b.length,
d;e<c;e++)if(d=b[e]){for(;(d=d.previousSibling)&&d.nodeType!==1;);b[e]=a||d&&d.nodeName.toLowerCase()===g?d||!1:d===g}a&&o.filter(g,b,!0)},">":function(b,g){var a=typeof g==="string";if(a&&!/\W/.test(g))for(var g=g.toLowerCase(),e=0,c=b.length;e<c;e++){var d=b[e];if(d)a=d.parentNode,b[e]=a.nodeName.toLowerCase()===g?a:!1}else{e=0;for(c=b.length;e<c;e++)(d=b[e])&&(b[e]=a?d.parentNode:d.parentNode===g);a&&o.filter(g,b,!0)}},"":function(b,a,e){var f=c++,h=d;if(typeof a==="string"&&!/\W/.test(a))var k=
a=a.toLowerCase(),h=j;h("parentNode",a,f,b,k,e)},"~":function(b,a,e){var f=c++,h=d;if(typeof a==="string"&&!/\W/.test(a))var k=a=a.toLowerCase(),h=j;h("previousSibling",a,f,b,k,e)}},find:{ID:function(b,a,e){if(typeof a.getElementById!=="undefined"&&!e)return(b=a.getElementById(b[1]))?[b]:[]},NAME:function(b,a){if(typeof a.getElementsByName!=="undefined"){for(var e=[],c=a.getElementsByName(b[1]),d=0,f=c.length;d<f;d++)c[d].getAttribute("name")===b[1]&&e.push(c[d]);return e.length===0?null:e}},TAG:function(b,
a){return a.getElementsByTagName(b[1])}},preFilter:{CLASS:function(b,a,e,c,d,f){b=" "+b[1].replace(/\\/g,"")+" ";if(f)return b;for(var f=0,h;(h=a[f])!=null;f++)h&&(d^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(b)>=0)?e||c.push(h):e&&(a[f]=!1));return!1},ID:function(b){return b[1].replace(/\\/g,"")},TAG:function(b){return b[1].toLowerCase()},CHILD:function(b){if(b[1]==="nth"){var a=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(b[2]==="even"&&"2n"||b[2]==="odd"&&"2n+1"||!/\D/.test(b[2])&&"0n+"+
b[2]||b[2]);b[2]=a[1]+(a[2]||1)-0;b[3]=a[3]-0}b[0]=c++;return b},ATTR:function(b,a,c,d,f,h){a=b[1].replace(/\\/g,"");!h&&e.attrMap[a]&&(b[1]=e.attrMap[a]);b[2]==="~="&&(b[4]=" "+b[4]+" ");return b},PSEUDO:function(b,g,c,d,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=o(b[3],null,null,g);else return b=o.filter(b[3],g,c,1^f),c||d.push.apply(d,b),!1;else if(e.match.POS.test(b[0])||e.match.CHILD.test(b[0]))return!0;return b},POS:function(b){b.unshift(!0);return b}},filters:{enabled:function(b){return b.disabled===
!1&&b.type!=="hidden"},disabled:function(b){return b.disabled===!0},checked:function(b){return b.checked===!0},selected:function(b){return b.selected===!0},parent:function(b){return!!b.firstChild},empty:function(b){return!b.firstChild},has:function(b,a,e){return!!o(e[3],b).length},header:function(b){return/h\d/i.test(b.nodeName)},text:function(b){return"text"===b.type},radio:function(b){return"radio"===b.type},checkbox:function(b){return"checkbox"===b.type},file:function(b){return"file"===b.type},
password:function(b){return"password"===b.type},submit:function(b){return"submit"===b.type},image:function(b){return"image"===b.type},reset:function(b){return"reset"===b.type},button:function(b){return"button"===b.type||b.nodeName.toLowerCase()==="button"},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)}},setFilters:{first:function(b,a){return a===0},last:function(b,a,e,c){return a===c.length-1},even:function(b,a){return a%2===0},odd:function(b,a){return a%2===1},lt:function(b,
a,e){return a<e[3]-0},gt:function(b,a,e){return a>e[3]-0},nth:function(b,a,e){return e[3]-0===a},eq:function(b,a,e){return e[3]-0===a}},filter:{PSEUDO:function(b,a,c,d){var h=a[1],q=e.filters[h];if(q)return q(b,c,a,d);else if(h==="contains")return(b.textContent||b.innerText||f([b])||"").indexOf(a[3])>=0;else if(h==="not"){a=a[3];c=0;for(d=a.length;c<d;c++)if(a[c]===b)return!1;return!0}else o.error("Syntax error, unrecognized expression: "+h)},CHILD:function(b,a){var e=a[1],c=b;switch(e){case "only":case "first":for(;c=
c.previousSibling;)if(c.nodeType===1)return!1;if(e==="first")return!0;c=b;case "last":for(;c=c.nextSibling;)if(c.nodeType===1)return!1;return!0;case "nth":var e=a[2],d=a[3];if(e===1&&d===0)return!0;var f=a[0],h=b.parentNode;if(h&&(h.sizcache!==f||!b.nodeIndex)){for(var q=0,c=h.firstChild;c;c=c.nextSibling)if(c.nodeType===1)c.nodeIndex=++q;h.sizcache=f}c=b.nodeIndex-d;return e===0?c===0:c%e===0&&c/e>=0}},ID:function(b,a){return b.nodeType===1&&b.getAttribute("id")===a},TAG:function(b,a){return a===
"*"&&b.nodeType===1||b.nodeName.toLowerCase()===a},CLASS:function(b,a){return(" "+(b.className||b.getAttribute("class"))+" ").indexOf(a)>-1},ATTR:function(b,a){var c=a[1],c=e.attrHandle[c]?e.attrHandle[c](b):b[c]!=null?b[c]:b.getAttribute(c),d=c+"",f=a[2],h=a[4];return c==null?f==="!=":f==="="?d===h:f==="*="?d.indexOf(h)>=0:f==="~="?(" "+d+" ").indexOf(h)>=0:!h?d&&c!==!1:f==="!="?d!==h:f==="^="?d.indexOf(h)===0:f==="$="?d.substr(d.length-h.length)===h:f==="|="?d===h||d.substr(0,h.length+1)===h+"-":
!1},POS:function(b,a,c,d){var f=e.setFilters[a[2]];if(f)return f(b,c,a,d)}}},q=e.match.POS,p;for(p in e.match)e.match[p]=RegExp(e.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),e.leftMatch[p]=RegExp(/(^(?:.|\r|\n)*?)/.source+e.match[p].source.replace(/\\(\d+)/g,function(b,a){return"\\"+(a-0+1)}));var B=function(b,a){b=Array.prototype.slice.call(b,0);return a?(a.push.apply(a,b),a):b};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(O){B=function(b,a){var e=a||[];if(h.call(b)===
"[object Array]")Array.prototype.push.apply(e,b);else if(typeof b.length==="number")for(var c=0,d=b.length;c<d;c++)e.push(b[c]);else for(c=0;b[c];c++)e.push(b[c]);return e}}var t;document.documentElement.compareDocumentPosition?t=function(b,a){if(!b.compareDocumentPosition||!a.compareDocumentPosition)return b==a&&(s=!0),b.compareDocumentPosition?-1:1;var e=b.compareDocumentPosition(a)&4?-1:b===a?0:1;e===0&&(s=!0);return e}:"sourceIndex"in document.documentElement?t=function(b,a){if(!b.sourceIndex||
!a.sourceIndex)return b==a&&(s=!0),b.sourceIndex?-1:1;var e=b.sourceIndex-a.sourceIndex;e===0&&(s=!0);return e}:document.createRange&&(t=function(b,a){if(!b.ownerDocument||!a.ownerDocument)return b==a&&(s=!0),b.ownerDocument?-1:1;var e=b.ownerDocument.createRange(),c=a.ownerDocument.createRange();e.setStart(b,0);e.setEnd(b,0);c.setStart(a,0);c.setEnd(a,0);e=e.compareBoundaryPoints(Range.START_TO_END,c);e===0&&(s=!0);return e});(function(){var b=document.createElement("div"),a="script"+(new Date).getTime();
b.innerHTML="<a name='"+a+"'/>";var c=document.documentElement;c.insertBefore(b,c.firstChild);if(document.getElementById(a))e.find.ID=function(b,a,e){if(typeof a.getElementById!=="undefined"&&!e)return(a=a.getElementById(b[1]))?a.id===b[1]||typeof a.getAttributeNode!=="undefined"&&a.getAttributeNode("id").nodeValue===b[1]?[a]:void 0:[]},e.filter.ID=function(b,a){var e=typeof b.getAttributeNode!=="undefined"&&b.getAttributeNode("id");return b.nodeType===1&&e&&e.nodeValue===a};c.removeChild(b);c=b=
null})();(function(){var b=document.createElement("div");b.appendChild(document.createComment(""));if(b.getElementsByTagName("*").length>0)e.find.TAG=function(b,a){var e=a.getElementsByTagName(b[1]);if(b[1]==="*"){for(var c=[],d=0;e[d];d++)e[d].nodeType===1&&c.push(e[d]);e=c}return e};b.innerHTML="<a href='#'></a>";if(b.firstChild&&typeof b.firstChild.getAttribute!=="undefined"&&b.firstChild.getAttribute("href")!=="#")e.attrHandle.href=function(b){return b.getAttribute("href",2)};b=null})();document.querySelectorAll&&
function(){var b=o,a=document.createElement("div");a.innerHTML="<p class='TEST'></p>";if(!(a.querySelectorAll&&a.querySelectorAll(".TEST").length===0)){o=function(a,e,c,g){e=e||document;if(!g&&e.nodeType===9&&!F(e))try{return B(e.querySelectorAll(a),c)}catch(d){}return b(a,e,c,g)};for(var e in b)o[e]=b[e];a=null}}();(function(){var b=document.createElement("div");b.innerHTML="<div class='test e'></div><div class='test'></div>";if(b.getElementsByClassName&&b.getElementsByClassName("e").length!==0&&
(b.lastChild.className="e",b.getElementsByClassName("e").length!==1))e.order.splice(1,0,"CLASS"),e.find.CLASS=function(b,a,e){if(typeof a.getElementsByClassName!=="undefined"&&!e)return a.getElementsByClassName(b[1])},b=null})();var M=document.compareDocumentPosition?function(b,a){return!!(b.compareDocumentPosition(a)&16)}:function(b,a){return b!==a&&(b.contains?b.contains(a):!0)},F=function(b){return(b=(b?b.ownerDocument||b:0).documentElement)?b.nodeName!=="HTML":!1},G=function(b,a){for(var c=[],
d="",f,h=a.nodeType?[a]:a;f=e.match.PSEUDO.exec(b);)d+=f[0],b=b.replace(e.match.PSEUDO,"");b=e.relative[b]?b+"*":b;f=0;for(var q=h.length;f<q;f++)o(b,h[f],c);return o.filter(d,c)};return o});
define("ninja/event-scribe",["require","exports","module"],function(){function f(){this.handlers={};this.currentElement=null}f.prototype={recordEventHandlers:function(f,d){if(this.currentElement!==f.element){if(this.currentElement!==null)this.applyEventHandlers(this.currentElement),this.handlers={};this.currentElement=f.element}for(var a in d.eventHandlers){var c=this.handlers[a];typeof c=="undefined"&&(c=function(){return!0});this.handlers[a]=d.buildHandler(f,a,c)}},applyEventHandlers:function(f){for(var d in this.handlers)jQuery(f).bind(d,
this.handlers[d])}};return f});
define("ninja/behavior-collection",["sizzle-1.0","ninja/behaviors","utils","ninja/event-scribe","ninja/exceptions"],function(f,j,d,a,c){function h(a){this.lexicalCount=0;this.eventQueue=[];this.behaviors={};this.selectors=[];this.mutationTargets=[];this.tools=a;return this}var s=d.forEach,r=c.TransformFailed,o=c.CouldntChoose;h.prototype={addBehavior:function(a,c){d.isArray(c)?s(c,function(c){this.addBehavior(a,c)},this):c instanceof j.base?this.insertBehavior(a,c):c instanceof j.select?this.insertBehavior(a,
c):c instanceof j.meta?this.insertBehavior(a,c):typeof c=="function"?this.addBehavior(a,c()):(c=new j.base(c),this.addBehavior(a,c))},insertBehavior:function(a,c){c.lexicalOrder=this.lexicalCount;this.lexicalCount+=1;this.behaviors[a]===void 0?(this.selectors.push(a),this.behaviors[a]=[c]):this.behaviors[a].push(c)},addMutationTargets:function(a){this.mutationTargets=this.mutationTargets.concat(a)},fireMutationEvent:function(){var a=this.mutationTargets;if(a.length>0)for(var c=a[0];a.length>0;c=a.shift())jQuery(c).trigger("thisChangedDOM");
else this.tools.getRootOfDocument().trigger("thisChangedDOM")},mutationEventTriggered:function(a){this.eventQueue.length==0?(d.log("mutation event - first"),this.enqueueEvent(a),this.handleQueue()):(d.log("mutation event - queueing"),this.enqueueEvent(a))},enqueueEvent:function(a){var c=!1,d=[];s(this.eventQueue,function(f){c=c||jQuery.contains(f.target,a.target);jQuery.contains(a.target,f.target)||d.push(f)});if(!c)d.unshift(a),this.eventQueue=d},handleQueue:function(){for(;this.eventQueue.length!=
0;)this.applyAll(this.eventQueue[0].target),this.eventQueue.shift()},applyBehaviorsTo:function(a,c){return this.applyBehaviorsInContext(new this.tools.behaviorContext,a,c)},applyBehaviorsInContext:function(c,f,h){var j,o=new a;this.tools.enrich(o.handlers,c.eventHandlerSet);h=h.sort(function(a,c){return a.priority!=c.priority?a.priority===void 0?-1:c.priority===void 0?1:a.priority-c.priority:a.lexicalOrder-c.lexicalOrder});s(h,function(a){try{j=a.inContext(c),f=a.applyTransform(j,f),c=j,c.element=
f,o.recordEventHandlers(c,a)}catch(h){if(h instanceof r)d.log("!!! Transform failed");else throw d.log(h),h;}});jQuery(f).data("ninja-visited",c);o.applyEventHandlers(f);this.tools.enrich(c.eventHandlerSet,o.handlers);this.fireMutationEvent();return f},collectBehaviors:function(a,c,f){s(f,function(f){try{c.push(f.choose(a))}catch(h){if(h instanceof o)d.log("!!! couldn't choose");else throw d.log(h),h;}})},apply:function(a,c,d){var f=[],h=this.selectors.length;this.collectBehaviors(a,f,c);if(c=jQuery(a).data("ninja-visited"))c.unbindHandlers(),
this.applyBehaviorsInContext(c,a,f);else{for(typeof d=="undefined"&&(d=0);d<h;d++)jQuery(a).is(this.selectors[d])&&this.collectBehaviors(a,f,this.behaviors[this.selectors[d]]);this.applyBehaviorsTo(a,f)}},applyAll:function(a){for(var c=this.selectors.length,d=0;d<c;d++){var h=this;s(f(this.selectors[d],a),function(a){jQuery(a).data("ninja-visited")||h.apply(a,[],d)})}}};return h});
define("ninja/root-context",["utils"],function(f){var j=f.forEach;return function(d){function a(){this.stashedElements=[];this.eventHandlerSet={}}a.prototype=d.enrich(d,{stash:function(a){this.stashedElements.unshift(a)},unstash:function(){return this.stashedElements.shift()},clearStash:function(){this.stashedElements=[]},cascadeEvent:function(a){var d=Ninja.tools.hiddenDiv();j(this.stashedElements,function(f){f=jQuery(f);f.data("ninja-visited",this);jQuery(d).append(f);f.trigger(a)})},unbindHandlers:function(){var a=
jQuery(this.element);for(eventName in this.eventHandlerSet)a.unbind(eventName,this.eventHandlerSet[eventName])}});return a}});
define("ninja/tools",["ninja/behaviors","ninja/behavior-collection","ninja/exceptions","utils","ninja/root-context"],function(f,j,d,a,c){function h(a){this.ninja=a;this.behaviorContext=c(this)}var s=d.TransformFailed;h.prototype={forEach:a.forEach,enrich:function(a,c){return jQuery.extend(a,c)},ensureDefaults:function(a,c){a instanceof Object||(a={});for(var e in c)typeof a[e]=="undefined"&&(typeof this.ninja.config[e]!="undefined"?a[e]=this.ninja.config[e]:typeof c[e]!="undefined"&&(a[e]=c[e]));
return a},getRootOfDocument:function(){return jQuery("html")},clearRootCollection:function(){this.ninja.behavior=this.ninja.goodBehavior;this.getRootOfDocument().data("ninja-behavior",null)},getRootCollection:function(){var a=this.getRootOfDocument();if(a.data("ninja-behavior")instanceof j)return a.data("ninja-behavior");var c=new j(this);a.data("ninja-behavior",c);return c},addMutationTargets:function(a){this.getRootCollection().addMutationTargets(a)},fireMutationEvent:function(){this.getRootCollection().fireMutationEvent()},
detachSyntheticMutationEvents:function(){this.getRootCollection().fireMutationEvent=function(){};this.getRootCollection().addMutationTargets=function(){}},copyAttributes:function(a,c,e){var d=RegExp("^"+e.join("$|^")+"$"),c=jQuery(c);this.forEach(a.attributes,function(a){d.test(a.nodeName)&&c.attr(a.nodeName,a.nodeValue)})},deriveElementsFrom:function(a,c){switch(typeof c){case "undefined":return a;case "string":return jQuery(c);case "function":return c(a)}},extractMethod:function(c,d){if(c.dataset!==
void 0&&c.dataset.method!==void 0&&c.dataset.method.length>0)return a.log("Override via dataset: "+c.dataset.method),c.dataset.method;if(c.dataset===void 0&&jQuery(c).attr("data-method")!==void 0){var e="Override via data-method: "+jQuery(c).attr("data-method");a.log(e);return jQuery(c).attr("data-method")}if(typeof d!=="undefined")for(var e=0,f=d.length;e<f;e++)if(d[e].name=="Method")return a.log("Override via Method: "+d[e].value),d[e].value;return typeof c.method!=="undefined"?c.method:"GET"},
cantTransform:function(a){throw new s(a);},applyBehaviors:function(a,c){this.getRootCollection().apply(a,c)},message:function(a,c){var e=this.ninja.config.messageWrapping(a,c);jQuery(this.ninja.config.messageList).append(e)},hiddenDiv:function(){var a=jQuery("div#ninja-hide");if(a.length>0)return a[0];a=jQuery("<div id='ninja-hide'></div>").css("display","none");jQuery("body").append(a);this.getRootCollection().applyBehaviorsTo(a,[this.ninja.suppressChangeEvents()]);return a}};return h});
define("ninja/configuration",["require","exports","module"],function(){return{messageWrapping:function(f,j){return"<div class='flash "+j+"'><p>"+f+"</p></div>"},messageList:"#messages",busyLaziness:200}});
define("ninja/tools/json-dispatcher",["utils"],function(f){function j(){this.handlers=[]}function d(a){this.desc=a}j.prototype={addHandler:function(a){this.handlers.push(new d(a))},dispatch:function(a){for(var c=this.handlers.length,d=0;d<c;d++)try{this.handlers[d].receive(a)}catch(j){f.log("Caught: "+j+" while handling JSON response.")}},inspect:function(){var a=[];f.forEach(this.handlers,function(c){a.push(c.inspect())});return"JSONDispatcher, "+this.handlers.length+" handlers:\n"+a.join("\n")}};
d.prototype={receive:function(a){this.compose([],a,this.desc);return null},compose:function(a,c,d){if(typeof d=="function")try{d.call(this,c)}catch(j){f.log("Caught: "+j+" while handling JSON at "+a.join("/"))}else for(var r in c)c.hasOwnProperty(r)&&r in d&&this.compose(a.concat([r]),c[r],d[r]);return null},inspectTree:function(a){var c=[],d;for(d in a)typeof a[d]=="function"?c.push(d):f.forEach(this.inspectTree(a[d]),function(a){c.push(d+"."+a)});return c},inspect:function(){return this.inspectTree(this.desc).join("\n")}};
return j});
define("ninja",["utils","ninja/tools","ninja/behaviors","ninja/configuration","ninja/tools/json-dispatcher"],function(f,j,d,a,c){function h(){this.config=a;this.utils=f;this.behavior=this.goodBehavior;this.jsonDispatcher=new c;this.tools=new j(this)}h.prototype={packageBehaviors:function(a){result=a({does:d.base,chooses:d.meta,selects:d.select});this.tools.enrich(this,result)},packageTools:function(a){this.tools.enrich(j.prototype,a)},configure:function(a){this.tools.enrich(this.config,a)},goodBehavior:function(a){var c=
this.tools.getRootCollection(),d;for(d in a)typeof a[d]=="undefined"?f.log("Selector "+d+" not properly defined - ignoring"):c.addBehavior(d,a[d]);jQuery(window).load(function(){Ninja.go()})},badBehavior:function(){throw Error("Called Ninja.behavior() after Ninja.go() - don't do that.  'Go' means 'I'm done, please proceed'");},respondToJson:function(a){this.jsonDispatcher.addHandler(a)},go:function(){function a(e){c.tools.getRootCollection().mutationEventTriggered(e)}var c=this;if(this.behavior!=
this.misbehavior){var d=this.tools.getRootOfDocument();d.bind("DOMSubtreeModified DOMNodeInserted thisChangedDOM",a);d.one("DOMSubtreeModified DOMNodeInserted",function(){c.tools.detachSyntheticMutationEvents()});this.behavior=this.badBehavior;this.tools.fireMutationEvent()}}};return new h});define("ninja/behaviors/utility",["ninja"],function(f){f.packageBehaviors(function(f){return{suppressChangeEvents:function(){return new f.does({events:{DOMSubtreeModified:function(){},DOMNodeInserted:function(){}}})}}})});
define("ninja/behaviors/standard",["ninja","utils"],function(f,j){f.packageBehaviors(function(d){return{submitsAsAjax:function(a){return new d.chooses(function(c){c.asLink=f.submitsAsAjaxLink(a);c.asForm=f.submitsAsAjaxForm(a)},function(a){switch(a.tagName.toLowerCase()){case "a":return this.asLink;case "form":return this.asForm}})},submitsAsAjaxLink:function(a){a=f.tools.ensureDefaults(a,{busyElement:function(a){return $(a).parents("address,blockquote,body,dd,div,p,dl,dt,table,form,ol,ul,tr")[0]}});
if(!a.actions)a.actions=a.expectsJSON;return new d.does({priority:10,helpers:{findOverlay:function(c){return this.deriveElementsFrom(c,a.busyElement)}},events:{click:function(c){this.overlayAndSubmit(c.target,c.target.href,a.actions)}}})},submitsAsAjaxForm:function(a){a=f.tools.ensureDefaults(a,{busyElement:void 0});if(!a.actions)a.actions=a.expectsJSON;return new d.does({priority:10,helpers:{findOverlay:function(c){return this.deriveElementsFrom(c,a.busyElement)}},events:{submit:function(c){this.overlayAndSubmit(c.target,
c.target.action,a.actions)}}})},becomesAjaxLink:function(a){a=f.tools.ensureDefaults(a,{busyElement:void 0,retainedFormAttributes:["id","class","lang","dir","title","data-.*"]});return[f.submitsAsAjax(a),f.becomesLink(a)]},becomesLink:function(a){a=f.tools.ensureDefaults(a,{retainedFormAttributes:["id","class","lang","dir","title","rel","data-.*"]});return new d.does({priority:30,transform:function(c){var d;(images=jQuery("input[type=image]",c)).size()>0?(image=images[0],d="<img src='"+image.src+
"' alt='"+image.alt+"'"):(submits=jQuery("input[type=submit]",c)).size()>0?(submit=submits[0],submits.size()>1&&j.log("Multiple submits.  Using: "+submit),d=submit.value):(j.log("Couldn't find a submit input in form"),this.cantTransform("Couldn't find a submit input"));d=jQuery("<a rel='nofollow' href='#'>"+d+"</a>");this.copyAttributes(c,d,a.retainedFormAttributes);this.stash(jQuery(c).replaceWith(d));return d},events:{click:function(){this.cascadeEvent("submit")}}})},decays:function(a){a=f.tools.ensureDefaults(a,
{lifetime:1E4,diesFor:600});return new d.does({priority:100,transform:function(c){jQuery(c).delay(a.lifetime).slideUp(a.diesFor,function(){jQuery(c).remove();f.tools.fireMutationEvent()})},events:{click:[function(){jQuery(this.element).remove()},"changesDOM"]}})}}})});
define("ninja/behaviors/placeholder",["ninja"],function(f){f.packageBehaviors(function(j){function d(a){return new j.does({priority:1E3,submit:[function(c,d,f){a.prepareForSubmit();f(c)},"andDoDefault"]})}function a(a){a=f.tools.ensureDefaults(a,{textElementSelector:function(a){return"*[data-for="+a.id+"]"},findTextElement:function(c){c=$(a.textElementSelector(c));return c.length==0?null:c[0]}});return new j.does({priority:-10,transform:function(c){var d=$(a.findTextElement(c));d===null&&this.cantTransform();
this.placeholderText=d.text();$(c).attr("placeholder",d.text());this.stash(d.detach())}})}var c=!!("placeholder"in document.createElement("input")),h=!!("placeholder"in document.createElement("textarea"));if(!c)var s=function(a,c){return new j.does({helpers:{prepareForSubmit:function(){$(this.element).val("")}},transform:function(){this.applyBehaviors(c,[d(this)])},events:{focus:function(){var c=$(this.element),d=c.attr("id");c.attr("id","");c.replaceWith(a);a.attr("id",d);a.focus()}}})},r=function(a){a=
f.tools.ensureDefaults(a,{findParentForm:function(a){return a.parents("form")[0]},retainedInputAttributes:["name","class","style","title","lang","dir","size","maxlength","alt","tabindex","accesskey","data-.*"]});return new j.does({priority:1E3,helpers:{swapInAlternate:function(){var a=$(this.element),c=a.attr("id");a.val()==""&&(a.attr("id",""),a.replaceWith(this.placeholderTextInput),this.placeholderTextInput.attr("id",c))}},transform:function(c){var d,f=$(c);d=$('<input type="text">');this.copyAttributes(c,
d,a.retainedInputAttributes);d.addClass("ninja_placeholder");d.val(this.placeholderText);f=s(f,a.findParentForm(f));this.applyBehaviors(d,[f]);this.placeholderTextInput=d;this.swapInAlternate();return c},events:{blur:function(){this.swapInAlternate()}}})};if(!c||!h)var o=function(a){a=f.tools.ensureDefaults(a,{findParentForm:function(a){return a.parents("form")[0]}});return new j.does({priority:1E3,helpers:{prepareForSubmit:function(){$(this.element).hasClass("ninja_placeholder")&&$(this.element).val("")}},
transform:function(c){var f=$(c);f.addClass("ninja_placeholder");f.val(this.placeholderText);this.applyBehaviors(a.findParentForm(f),[d(this)]);return c},events:{focus:function(){$(this.element).hasClass("ninja_placeholder")&&$(this.element).removeClass("ninja_placeholder").val("")},blur:function(){$(this.element).val()==""&&$(this.element).addClass("ninja_placeholder").val(this.placeholderText)}}})};return{hasPlaceholder:function(d){var f=[a(d)];(!c||!h)&&f.push(new j.chooses(function(a){c?(a.asTextInput=
null,a.asPassword=null):(a.asTextInput=o(d),a.asPassword=r(d));a.asTextArea=h?null:o(d)},function(a){a=$(a);if(a.is("input[type=text]"))return this.asTextInput;else if(a.is("textarea"))return this.asTextArea;else if(a.is("input[type=password]"))return this.asPassword}));return f}}})});
define("ninja/behaviors/trigger-on",["ninja"],function(f){f.packageBehaviors(function(j){return{triggersOnSelect:function(d){var a=d=f.tools.ensureDefaults(d,{busyElement:void 0,placeholderText:"Select to go",placeholderValue:"instructions"});if(typeof d.actions==="object")a=d.actions;return new j.does({priority:20,helpers:{findOverlay:function(a){return this.deriveElementsFrom(a,d.busyElement)}},transform:function(a){var f=$(a).find("select").first();typeof f=="undefined"&&this.cantTransform();f.prepend("<option value='"+
d.placeholderValue+"'> "+d.placeholderText+"</option>");f.val(d.placeholderValue);$(a).find("input[type='submit']").remove();return a},events:{change:[function(c,d){this.overlayAndSubmit(d,d.action,a)},"andDoDefault"]}})}}})});
define("ninja/behaviors/confirm",["ninja"],function(f){f.packageBehaviors(function(j){return{confirms:function(d){function a(a,f){confirm(d.confirmMessage(f))||(a.preventDefault(),a.preventFallthrough())}d=f.tools.ensureDefaults(d,{confirmMessage:function(a){return $(a).attr("data-confirm")}});if(typeof d.confirmMessage=="string")message=d.confirmMessage,d.confirmMessage=function(){return message};return new j.selects({form:new j.does({priority:20,events:{submit:[a,"andDoDefault"]}}),"a,input":new j.does({priority:20,
events:{click:[a,"andDoDefault"]}})})}}})});define("ninja/behaviors/all",["./utility","./standard","./placeholder","./trigger-on","./confirm"],function(){});
define("ninja/tools/overlay",["utils","ninja"],function(f,j){function d(a){a=this.convertToElementArray(a);this.laziness=0;var d=this;this.set=jQuery(jQuery.map(a,function(a){return d.buildOverlayFor(a)}))}var a=f.forEach;d.prototype={convertToElementArray:function(c){var d=this;switch(typeof c){case "undefined":return[];case "boolean":return[];case "string":return d.convertToElementArray(jQuery(c));case "function":return d.convertToElementArray(c());case "object":if("focus"in c&&"blur"in c&&!("jquery"in
c))return[c];else if("length"in c&&"0"in c){var f=[];a(c,function(a){f=f.concat(d.convertToElementArray(a))});return f}else return[]}},buildOverlayFor:function(a){var d=jQuery(document.createElement("div")),a=jQuery(a),f=a.offset();d.css("position","absolute");d.css("top",f.top);d.css("left",f.left);d.width(a.outerWidth());d.height(a.outerHeight());d.css("zIndex","2");d.css("display","none");return d[0]},affix:function(){this.set.appendTo(jQuery("body"));overlaySet=this.set;window.setTimeout(function(){overlaySet.css("display",
"block")},this.laziness)},remove:function(){this.set.remove()}};j.packageTools({overlay:function(){return new d(jQuery.makeArray(arguments))},busyOverlay:function(a){a=this.overlay(a);a.set.addClass("ninja_busy");a.laziness=this.ninja.config.busyLaziness;return a},buildOverlayFor:function(a){var d=jQuery(document.createElement("div")),a=jQuery(a),f=a.offset();d.css("position","absolute");d.css("top",f.top);d.css("left",f.left);d.width(a.outerWidth());d.height(a.outerHeight());d.css("zIndex","2");
return d}});return d});
define("ninja/tools/ajax-submitter",["ninja","utils","./json-dispatcher","./overlay"],function(f,j){function d(){this.formData=[];this.action="/";this.method="GET";this.dataType="script";return this}d.prototype={submit:function(){j.log("Computed method: "+this.method);jQuery.ajax(this.ajaxData())},sourceForm:function(a){this.formData=jQuery(a).serializeArray()},ajaxData:function(){return{data:this.formData,dataType:this.dataType,url:this.action,type:this.method,complete:this.responseHandler(),success:this.successHandler(),
error:this.onError}},successHandler:function(){var a=this;return function(c,d,f){a.onSuccess(f,d,c)}},responseHandler:function(){var a=this;return function(c,d){a.onResponse(c,d);f.tools.fireMutationEvent()}},onResponse:function(){},onSuccess:function(){},onError:function(a){j.log(a.responseText);f.tools.message("Server error: "+a.statusText,"error")}};f.packageTools({ajaxSubmitter:function(){return new d},ajaxToJson:function(){var a=this.ajaxSubmitter();a.dataType="json";a.onSuccess=function(a,d,
j){f.jsonDispatcher.dispatch(j)};return a},overlayAndSubmit:function(a,c,d){var f=this.busyOverlay(this.findOverlay(a)),d=typeof d=="undefined"?this.ajaxSubmitter():this.ajaxToJson(d);d.sourceForm(a);d.action=c;d.method=this.extractMethod(a,d.formData);d.onResponse=function(){f.remove()};f.affix();d.submit()}});return d});define("ninja/tools/all",["./overlay","./ajax-submitter","./json-dispatcher"],function(){});define("ninja/jquery",["ninja"],function(f){jQuery.extend({ninja:f,behavior:f.behavior})});
window.Ninja={orderList:[],orders:function(f){this.orderList.push(f)}};require(["ninja","ninja/behaviors/all","ninja/tools/all","ninja/jquery"],function(f){var j=window.Ninja.orderList,d=j.length;window.Ninja=f;f.behavior=f.behavior;for(var a=0;a<d;a++)j[a](f);f.orders=function(a){a(this)}});define("main",function(){});
